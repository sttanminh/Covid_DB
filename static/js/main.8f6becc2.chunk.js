(this.webpackJsonpteam4_covid_app=this.webpackJsonpteam4_covid_app||[]).push([[0],{216:function(e,t,a){},220:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),c=a(31),s=a.n(c),r=(a(85),a(4)),o=(a(86),1/15),l=.01;function d(e,t,a,n,i){var c=function(e){var t=0;if(e.length>15)for(var a=e.length-1;a>e.length-1-15;a--)t+=e[a];else t=e.reduce((function(e,t){return e+t}));return t}(e);return function(e,t,a,n,i,c,s){for(var r={},d=[e*(1-c)],u=[e*c],b=[t],h=[0],j=[n],f=[a],p=0;p<i;p++){var O=1*(b[p]+h[p])*d[p]/s;O=O>d[p]?0:O;var v=1*(b[p]+h[p])*u[p]/s*(1-.98);v=v>u[p]?0:v,d[p+1]=d[p]-O,u[p+1]=u[p]-v,b[p+1]=b[p]+O-o*b[p],h[p+1]=h[p]+v-o*h[p],f[p+1]=f[p]+o*b[p]*.99+o*h[p]*.9998,j[p+1]=j[p]+o*b[p]*l+o*h[p]*l*(1-.98),p==i-1&&(r.newCases=Math.round(O+v),r.deaths=Math.round(j[p+1]-j[p]))}return r}(function(e,t){return e-t}(t,c),c,function(e,t){var a=0;if(e.length>15){for(var n=0;n<e.length-15;n++)a+=e[n];a-=t}else a=0;return a}(e,a),a,i,n,t)}a(87);var u=a(2);function b(e){var t=e.data,a=e.theme,i=Object(n.useState)(),c=Object(r.a)(i,2),s=c[0],o=c[1],l=Object(n.useState)(null),b=Object(r.a)(l,2),h=b[0],j=b[1],f=Object(n.useState)("Feature3-light"),p=Object(r.a)(f,2),O=p[0],v=p[1],m=Object(n.useRef)(),g=Object(n.useRef)(),x=Object(n.useRef)();function y(e,a,n){var i=function(e){t=[];for(var a=0;a<s.length;a++)if(s[a][1].location===e){t.push(s[a][1].population),t.push(s[a][1].data[s[a][1].data.length-1].total_deaths);for(var n=[],i=0;i<s[a][1].data.length;i++)n.push(s[a][1].data[i].new_cases);t.push(n)}return t}(e),c=i[0],r=i[1];return d(i[2],c,r,a/100,n)}function w(){return null!==h?Object(u.jsxs)("div",{children:[Object(u.jsxs)("h2",{children:["New cases each day: ",h.newCases]}),Object(u.jsxs)("h2",{children:["New death each day: ",h.deaths]})]}):null}return Object(n.useEffect)((function(){var e=t;if(void 0!==t)var a=Object.keys(e).map((function(t){return[t,e[t]]}));o(a)}),[t]),Object(n.useEffect)((function(){v("App-light"===a?"Feature3-light":"Feature3-dark")}),[a]),Object(u.jsxs)("div",{className:O,children:[Object(u.jsx)("h1",{className:"feature-heading",children:" Covid Engine"}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{id:"innerDiv3",children:[Object(u.jsxs)("div",{id:"innerLabelsDiv3",children:[Object(u.jsx)("label",{className:"input-label-3",children:"Vaccination Rate (%):"}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{className:"input-label-3",children:"Day Number:"}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{className:"input-label-3",children:"Country selection:"})]}),Object(u.jsxs)("div",{id:"innerInputsDiv3",children:[Object(u.jsx)("input",{ref:g,type:"number",id:"inputVRate",name:"inputVRate",className:"input-field-3",min:"0",max:"100"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{ref:x,type:"number",id:"inputNo2",name:"inputNo2",className:"input-field-3",min:"1"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{ref:m,list:"countryList",id:"countrySelection",name:"countrySelection",className:"input-field-3"}),Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:function(){if("undefined"!==typeof s){for(var e='<datalist id="countryList">',t=0;t<s.length;t++)e+='<option value="'.concat(s[t][1].location,'"></option>');return e+="</datalist>"}}()}})]}),Object(u.jsx)("div",{id:"buttonDiv3",children:Object(u.jsx)("button",{className:"submit-button",onClick:function(){!function(){if(void 0!==s){var e=g.current.value,t=x.current.value,a=m.current.value;if(void 0!==e&&null!==e&&e>=0&&e<=100&&0!==e.length)if(void 0!==t&&null!==t&&0!==t.length){for(var n=!1,i=0;i<s.length;i++)if(s[i][1].location===a){s[i][1].population,n=!0;break}if(n){var c=y(a,e,t);j(c)}else alert("Your selected country is invalid or empty")}else alert("Your other input was invalid or empty");else alert("Your input was invalid or empty, please ensure the vaccination rate is given as a valid percentage. (eg. input '50' for 50%)")}else alert("No data yet, please try again shortly")}()},children:"Submit and Run"})})]}),Object(u.jsx)(w,{})]})}a(89);var h=a(33),j=a(20),f=a.n(j);function p(e){var t=e.data,a=e.theme,i=Object(n.useState)(),c=Object(r.a)(i,2),s=c[0],o=c[1],l=Object(n.useState)(),d=Object(r.a)(l,2),b=d[0],j=d[1],p=Object(n.useState)("Feature2-light"),O=Object(r.a)(p,2),v=O[0],m=O[1],g=Object(n.useRef)(),x=Object(n.useRef)(),y=Object(n.useRef)(),w="Australia";function N(){var e=function(e,a,n){if(void 0===s)return 0;for(var i=!1,c=0;c<s.length;c++)s[c][1].location===e&&(i=!0);if(!1===i)return 1;var r=new Date(a),o=new Date(n),l=new Date;if(r>l||o>l||r>o)return 2;return t={country:e,startDate:a,endDate:n}}(g.current.value,x.current.value,y.current.value);0===e?alert("Data not ready, please wait a moment..."):1===e?alert("Please select country from the drop down menu"):2===e?alert("Please ensure start date and end date inputs are valid"):j(D(e))}function D(e){var a="",n="",i="";null===e?a=w:(a=e.country,n=e.startDate,i=e.endDate);var c=function(e,a,n){t=[];for(var i=0;i<s.length;i++)if(s[i][1].location===e){var c=[],r=null,o=[],l=[],d=!1;(""===a||Date.parse(a)<Date.parse(s[i][1].data[0].date))&&(d=!0);for(var u=0;u<s[i][1].data.length;u++)s[i][1].data[u].date===a&&(d=!0),s[i][1].data[u].date===n&&(d=!1),d&&(s[i][1].data[u].hasOwnProperty("new_vaccinations")&&(r+=s[i][1].data[u].new_vaccinations,c.push({rate:100*r/s[i][1].population/2,date:s[i][1].data[u].date})),s[i][1].data[u].hasOwnProperty("new_deaths")&&o.push({rate:s[i][1].data[u].new_deaths,date:s[i][1].data[u].date}),l.push({rate:s[i][1].data[u].new_cases,date:s[i][1].data[u].date}));t.push(c),t.push(o),t.push(l);break}return t}(a,n,i);if(c!==[]){for(var r=c[2].map((function(e){return e.date})),o=r.map((function(e){return new Date(e).toLocaleDateString()})),l=c[2].map((function(e){return e.rate})),d=0;d<l.length;d++)l[d]<0&&(l[d]=-l[d]);return{labels:o,datasets:[{label:"New cases",data:l,borderWidth:1,fill:!1,borderColor:"rgb(255, 0, 0)",tension:1,yAxisID:"case_death",xAxisID:"date_period"},{label:"Deaths",data:C(r,c[1]),borderWidth:1,fill:!1,borderColor:"rgb(0, 0, 255)",tension:.1,yAxisID:"case_death"},{label:"Vaccination rate",data:C(r,c[0]),borderWidth:1,fill:!1,borderColor:"rgb(0, 255, 0)",tension:.1,yAxisID:"vaccinate"}]}}alert("No data yet, please try again shortly")}function C(e,t){var a=[],n={};return t.forEach((function(e){n[e.date]=e.rate})),e.forEach((function(e){void 0===n[e]?a.push(null):a.push(n[e])})),a}function k(e){var t=new Date,a=t.toISOString().split("T")[0];switch(Array.prototype.forEach.call(document.getElementsByClassName("time-sel-button-2"),(function(e){e.setAttribute("style","background-color:rgb(131, 143, 255)")})),document.getElementById(e).setAttribute("style","background-color:#5ad3af9a"),"otherButton"===e?(x.current.disabled=!1,x.current.max=a,y.current.disabled=!1,y.current.max=a):(x.current.disabled=!0,y.current.disabled=!0),e){case"weekButton":var n=new Date;n.setDate(t.getDate()-7),x.current.value=n.toISOString().split("T")[0],y.current.value=a;break;case"monthButton":var i=new Date;i.setMonth(t.getMonth()-1),x.current.value=i.toISOString().split("T")[0],y.current.value=a;break;case"yearButton":var c=new Date;c.setFullYear(t.getFullYear()-1),x.current.value=c.toISOString().split("T")[0],y.current.value=a}}return Object(n.useEffect)((function(){var e=t;if(void 0!==t)var a=Object.keys(e).map((function(t){return[t,e[t]]}));o(a)}),[t]),Object(n.useEffect)((function(){m("App-light"===a?"Feature2-light":"Feature2-dark")}),[a]),Object(u.jsxs)("div",{className:v,children:[Object(u.jsx)("h1",{className:"feature-heading",children:"Graphs by Country"}),Object(u.jsx)("br",{}),Object(u.jsx)("div",{id:"leftGraph2",children:function(){if(void 0!==s){var e={};e=void 0===b?D(null):b;var t=g.current.value;return""===t&&(t=w),Object(u.jsx)(h.a,{data:e,options:{plugins:{title:{display:!0,text:"Cases, Deaths, Vaccination Rate for ".concat(t," against time"),fontSize:20},legend:{display:!0,position:"top"}},elements:{point:{radius:.1}},scales:{case_death:{display:!0,position:"left",type:"linear",min:0,title:{display:!0,text:"New Cases/Deaths (per day)"}},vaccinate:{display:!0,position:"right",type:"linear",min:0,max:100,title:{display:!0,text:"Vaccination Rate (%)"}},date_period:{display:!0,position:"bottom",title:{display:!0,text:"Date (dd/mm/yyyy)"}}}},height:11,width:10})}return Object(u.jsx)("div",{className:"loading-icon",children:Object(u.jsx)("div",{className:"loading-div",children:Object(u.jsx)(f.a,{"margin-top":"5cm",type:"Oval",color:"#a6a6a6",height:70,width:70})})})}()}),Object(u.jsxs)("div",{id:"rightOptions2",children:[Object(u.jsx)("h3",{children:"Options"}),Object(u.jsx)("label",{className:"input-label-2",children:"Country selection: "}),Object(u.jsx)("input",{ref:g,list:"countryList",id:"countrySelection",name:"countrySelection",className:"input-field-2",defaultValue:w}),Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:function(){if("undefined"!==typeof s){for(var e='<datalist id="countryList">',t=0;t<s.length;t++)e+='<option value="'.concat(s[t][1].location,'"></option>');return e+="</datalist>"}}()}}),Object(u.jsx)("label",{className:"input-label-2",children:"Time Period: "}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{className:"time-sel-button-2",id:"weekButton",onClick:function(){k("weekButton")},children:"Past Week"}),Object(u.jsx)("button",{className:"time-sel-button-2",id:"monthButton",onClick:function(){k("monthButton")},children:"Past Month"}),Object(u.jsx)("button",{className:"time-sel-button-2",id:"yearButton",onClick:function(){k("yearButton")},children:"Past Year"}),Object(u.jsx)("button",{className:"time-sel-button-2",id:"otherButton",onClick:function(){k("otherButton")},children:"Other"}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{className:"small-label-2",children:"From: "}),Object(u.jsx)("input",{ref:x,disabled:!0,className:"date-field-2",id:"fromDate",type:"date"}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{className:"small-label-2",children:"Until: "}),Object(u.jsx)("input",{ref:y,disabled:!0,className:"date-field-2",id:"toDate",type:"date"}),Object(u.jsx)("div",{id:"graphOptions2",children:Object(u.jsxs)("p",{children:["Click on the ",Object(u.jsx)("span",{className:"highlight-red",children:"legend"})," above the graph to show/hide graphs. If any of ",Object(u.jsx)("span",{className:"highlight-blue",children:"cases"}),", ",Object(u.jsx)("span",{className:"highlight-blue",children:"deaths "}),"or ",Object(u.jsx)("span",{className:"highlight-blue",children:"vaccination rate "})," lines do not show up, it means there is no data available."]})}),Object(u.jsx)("button",{className:"submit-button",onClick:function(){N()},children:" Submit"})]})]})}var O=a(11),v=(a(216),a(50)),m=a(49),g=a(231),x=a(14);a(217);function y(e){var t=e.data,a=e.theme,i=Object(n.useState)(),c=Object(r.a)(i,2),s=c[0],o=c[1],l=Object(n.useState)("Feature2-light"),d=Object(r.a)(l,2),b=d[0],j=d[1],p=Object(n.useState)(),y=Object(r.a)(p,2),w=y[0],N=y[1],D=Object(n.useState)(),C=Object(r.a)(D,2),k=C[0],S=C[1],M=Object(n.useState)(1),I=Object(r.a)(M,2),_=I[0],A=I[1],V=function(e,t){A(t)},B=Object(n.useState)(!1),E=Object(r.a)(B,2),T=E[0],F=E[1];function L(){F(!T)}function R(e){return"".concat(e)}function P(e,a,n){t=[];for(var i=new Date(e).toDateString().split(" "),c=i[2]+" "+i[1]+" "+i[3].substr(2,2),r=new Date(a).toDateString().split(" "),o=r[2]+" "+r[1]+" "+r[3].substr(2,2),l=!1,d=0;d<s.length;d++){if(s[d].date===c)l=!0;else if(s[d].date===o)break;l&&null!==s[d].cases&&t.push(s[d])}return function(e,t){for(var a=function(t,a){for(var n=0,i=t;i<a;i++)n+=e[i].cases;return n/(a-t)},n=[],i=Math.floor(t/2),c=Math.ceil(t/2),s=i;s<=e.length-c;s++)n.push(Object(O.a)(Object(O.a)({},e[s]),{},{cases:a(s-i,s+c)}));return n}(t,n)}function Y(){if(w.getYear()>=120){console.log("in");var e=w;e.setMonth(e.getMonth()-6);var t=k;t.setMonth(t.getMonth()-6),S(new Date(t)),N(new Date(e))}}function G(){var e=new Date,t=new Date(k);if(console.log(t),t.setMonth(t.getMonth()+4),t<=e){var a=w;a.setMonth(a.getMonth()+6);var n=k;n.setMonth(n.getMonth()+6),S(new Date(n)),N(new Date(a))}}return Object(n.useEffect)((function(){j("App-light"===a?"Feature1-light":"Feature1-dark")}),[a]),Object(n.useEffect)((function(){o(t)}),[t]),Object(n.useEffect)((function(){var e=new Date,t=new Date;e.getMonth()<6?(t.setMonth(t.getMonth()-6),t.setYear(t.getYear()-1)):t.setMonth(t.getMonth()-6),N(t),S(e)}),[]),Object(u.jsxs)("div",{className:b,children:[Object(u.jsx)("h1",{className:"feature-heading",children:"COVID-19 in Victoria"}),Object(u.jsxs)(x.d,{children:[Object(u.jsxs)(x.b,{children:[Object(u.jsx)(x.a,{children:" Victoria's Data Graph"}),Object(u.jsx)(x.a,{children:" Victoria's Daily New cases "})]}),Object(u.jsx)(x.c,{children:Object(u.jsx)("div",{id:"graph1",children:function(){if(void 0!==s){var e=function(){var e=P(w,k,_),t=[],a=[];return e.forEach((function(e){var n=e.date;t.push(new Date(n).toLocaleDateString()),a.push(e.cases)})),{labels:t,datasets:[{label:"New cases",data:a,borderWidth:1,fill:!1,borderColor:"rgb(0, 0, 0)",pointBackgroundColor:"rgb(0, 0, 0)",tension:1,yAxisID:"case_death",xAxisID:"date_period"}]}}();return Object(u.jsxs)("div",{children:[Object(u.jsx)(h.a,{data:e,options:{plugins:{title:{display:!0,text:"",fontSize:20},legend:{display:!1}},elements:{point:{radius:2}},scales:{case_death:{display:!0,position:"left",type:"linear",min:0,title:{display:!0,text:"New Cases/Day"}},date_period:{display:!0,position:"bottom",title:{display:!0,text:"Date (dd/mm/yyyy)"}}}},height:36,width:50}),Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{className:"arrows",children:[Object(u.jsx)(v.a,{onClick:Y,className:"arrow-icon"}),Object(u.jsx)(v.b,{onClick:G,className:"arrow-icon"})]}),Object(u.jsx)("div",{className:"slider",children:Object(u.jsx)(g.a,{size:"10cm",color:"secondary","aria-label":"smoothing",defaultValue:1,getAriaValueText:R,valueLabelDisplay:"auto",value:_,onChange:V,marks:!0,step:1,min:1,max:7})}),Object(u.jsxs)("div",{className:"sliderInfoPopup",children:[Object(u.jsx)(m.a,{onClick:L,color:"grey",className:"infoIcon"}),T&&Object(u.jsx)("div",{className:"popupThing",children:Object(u.jsx)("div",{className:"popupOverlay",onClick:L,children:Object(u.jsxs)("div",{className:"popupContent",children:["This is a graph of daily COVID cases in Victoria,",Object(u.jsx)("br",{}),"since April 9th 2020. Our graph displays data over a range of 6 months, for make smaller day-to-day fluctuations more visible to the user.",Object(u.jsx)("br",{}),Object(u.jsx)("br",{}),"The pink sliding scale is available to smooth data using moving averages (of our own calculations), ranging from",Object(u.jsx)("br",{}),"1 - 7.",Object(u.jsx)("br",{}),Object(u.jsxs)("p",{className:"covidReference",children:["This data was sourced from the ",Object(u.jsx)("br",{}),Object(u.jsx)("a",{href:"https://www.coronavirus.vic.gov.au/victorian-coronavirus-covid-19-data",children:"Victorian Government (COVID-19 Data)."})]})]})})})]})]})]})}return Object(u.jsx)("div",{className:"loading-icon",children:Object(u.jsx)("div",{className:"loading-div",children:Object(u.jsx)(f.a,{"margin-top":"5cm",type:"Oval",color:"#a6a6a6",height:70,width:70})})})}()})}),Object(u.jsx)(x.c,{children:function(){if(void 0!==s){var e=s.length-1,t=s[e].cases;null==t&&(t=s[e-=1].cases);var a=s[e].date;return Object(u.jsxs)("div",{className:"todayVicCases",children:[Object(u.jsx)("p",{id:"titlingLine",children:"Number of cases:"}),Object(u.jsx)("p",{id:"caseNumber",children:t}),Object(u.jsxs)("p",{id:"dateLine",children:["As recorded on: \xa0(",Object(u.jsx)("i",{children:a}),")"]}),Object(u.jsx)(m.a,{onClick:L,className:"infoIcon"}),T&&Object(u.jsx)("div",{className:"popupThing",children:Object(u.jsx)("div",{className:"popupOverlay",onClick:L,children:Object(u.jsxs)("div",{className:"popupContent",children:["This data was sourced from the ",Object(u.jsx)("br",{}),Object(u.jsx)("a",{href:"https://www.coronavirus.vic.gov.au/victorian-coronavirus-covid-19-data",children:"Victorian Government (COVID-19 Data)."})]})})})]})}return Object(u.jsx)("div",{className:"loading-icon",children:Object(u.jsx)("div",{className:"loading-div",children:Object(u.jsx)(f.a,{"margin-top":"5cm",type:"Oval",color:"#a6a6a6",height:70,width:70})})})}()})]})]})}var w=function(){var e=Object(n.useState)(),t=Object(r.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(),s=Object(r.a)(c,2),o=s[0],l=s[1],d=Object(n.useState)("App-light"),h=Object(r.a)(d,2),j=h[0],f=h[1],O=Object(n.useState)(0),v=Object(r.a)(O,2),m=v[0],g=v[1],x=Object(n.useState)({text:"Light Mode",textColour:"black",bkgColor:"#ffdc3e"}),w=Object(r.a)(x,2),N=w[0],D=w[1],C=Object(n.useRef)();return Object(n.useEffect)((function(){fetch("https://covid.ourworldindata.org/data/owid-covid-data.json").then((function(e){return e.json()})).then((function(e){i(e),console.log(e)}))}),[]),Object(n.useEffect)((function(){console.log("before fetch"),fetch("https://covid-db-2021.herokuapp.com//victoria-cases").then((function(e){return e.json()})).then((function(e){l(e),console.log(e)})).catch((function(e){console.warn("Something went wrong.",e)}))}),[]),Object(n.useEffect)((function(){window.scrollTo(0,0)}),[m]),Object(u.jsxs)("div",{className:j,children:[Object(u.jsx)(b,{data:a,theme:j}),Object(u.jsx)(p,{data:a,theme:j}),Object(u.jsx)(y,{data:o,theme:j}),Object(u.jsx)("button",{ref:C,style:{color:N.textColour,backgroundColor:N.bkgColor},id:"themeButton",onClick:function(){"App-light"===j?(document.body.style="background: #161716",f("App-dark"),D({text:"Dark Mode",textColour:"white",bkgColor:"#38218f"})):(f("App-light"),document.body.style="background: white",D({text:"Light Mode",textColour:"black",bkgColor:"#ffdc3e"}))},children:N.text}),Object(u.jsx)("button",{className:"topButton",ref:C,style:{color:N.textColour,backgroundColor:N.bkgColor},onClick:function(){g(1==m?0:1)},children:"Top"})]})},N=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,232)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;a(e),n(e),i(e),c(e),s(e)}))};s.a.render(Object(u.jsxs)(i.a.StrictMode,{children:[Object(u.jsx)("div",{id:"headerDiv",children:Object(u.jsx)("h1",{id:"mainHeading",children:"Covid Dashboard"})}),Object(u.jsx)(w,{}),Object(u.jsx)("div",{id:"footerDiv"})]}),document.getElementById("root")),N()},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},89:function(e,t,a){}},[[220,1,2]]]);
//# sourceMappingURL=main.8f6becc2.chunk.js.map